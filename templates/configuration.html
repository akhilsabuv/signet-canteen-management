{% extends "base.html" %}
{% block title %}Configuration - Company Software UI{% endblock %}
{% block content %}
<h2 class="mt-4">Configuration</h2>
{% with messages = get_flashed_messages(with_categories=true) %}
  {% if messages %}
    {% for category, message in messages %}
      <div class="alert alert-{{ 'danger' if category == 'error' else 'success' }}">{{ message }}</div>
    {% endfor %}
  {% endif %}
{% endwith %}
<form method="post">
  <!-- Logger DB Settings -->
  <div class="mb-3">
    <label for="TIME_ZONE" class="form-label">Time Zone</label>
    <select class="form-select" name="TIME_ZONE" id="TIME_ZONE">
      {% for tz in timezones %}
        <option value="{{ tz }}" {% if tz == config.TIME_ZONE %}selected{% endif %}>{{ tz }}</option>
      {% endfor %}
    </select>
    <small class="form-text text-muted">Select a valid time zone.</small>
  </div>
  
  <h4>Logger Database</h4>
  <div class="mb-3">
    <label for="logger_db_host" class="form-label">Host</label>
    <input type="text" class="form-control" name="logger_db_host" id="logger_db_host" value="{{ config.LOGGER_DB_HOST }}">
  </div>
  <div class="mb-3">
    <label for="logger_db_port" class="form-label">Port</label>
    <input type="number" class="form-control" name="logger_db_port" id="logger_db_port" value="{{ config.LOGGER_DB_PORT }}">
  </div>
  <div class="mb-3">
    <label for="logger_db_username" class="form-label">Username</label>
    <input type="text" class="form-control" name="logger_db_username" id="logger_db_username" value="{{ config.LOGGER_DB_USERNAME }}">
  </div>
  <div class="mb-3">
    <label for="logger_db_password" class="form-label">Password</label>
    <input type="password" class="form-control" name="logger_db_password" id="logger_db_password" value="{{ config.LOGGER_DB_PASSWORD }}">
  </div>
  <div class="mb-3">
    <label for="logger_db_name" class="form-label">Database Name</label>
    <input type="text" class="form-control" name="logger_db_name" id="logger_db_name" value="{{ config.LOGGER_DB_NAME }}">
  </div>
  
  <!-- Main DB Settings -->
  <h4>Main Database</h4>
  <div class="mb-3">
    <label for="main_db_host" class="form-label">Host</label>
    <input type="text" class="form-control" name="main_db_host" id="main_db_host" value="{{ config.MAIN_DB_HOST }}">
  </div>
  <div class="mb-3">
    <label for="main_db_port" class="form-label">Port</label>
    <input type="number" class="form-control" name="main_db_port" id="main_db_port" value="{{ config.MAIN_DB_PORT }}">
  </div>
  <div class="mb-3">
    <label for="main_db_username" class="form-label">Username</label>
    <input type="text" class="form-control" name="main_db_username" id="main_db_username" value="{{ config.MAIN_DB_USERNAME }}">
  </div>
  <div class="mb-3">
    <label for="main_db_password" class="form-label">Password</label>
    <input type="password" class="form-control" name="main_db_password" id="main_db_password" value="{{ config.MAIN_DB_PASSWORD }}">
  </div>
  <div class="mb-3">
    <label for="main_db_name" class="form-label">Database Name</label>
    <input type="text" class="form-control" name="main_db_name" id="main_db_name" value="{{ config.MAIN_DB_NAME }}">
  </div>
  
  <!-- Other Settings -->
  <h4>Other Settings</h4>
  <div class="mb-3">
    <label for="default_printer" class="form-label">Default Printer</label>
    <select class="form-select" name="default_printer" id="default_printer">
      {% for printer in printers %}
        <option value="{{ printer }}" {% if printer == config.DEFAULT_PRINTER %}selected{% endif %}>{{ printer }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="mb-3">
    <label for="table_prefix" class="form-label">Table Prefix</label>
    <input type="text" class="form-control" name="table_prefix" id="table_prefix" value="{{ config.TABLE_PREFIX }}">
  </div>

  <div class="d-flex justify-content-end">
    <button type="reset" class="btn btn-secondary me-2">Cancel</button>
    <button type="submit" class="btn btn-primary">Save Changes</button>
  </div>
</form>
{% endblock %}
